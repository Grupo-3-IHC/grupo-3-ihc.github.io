<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="assets/styles/barrabaja.css">
  <link rel="stylesheet" href="assets/styles/stylesAD.css">
  <title>Seguridad</title>
  <style>
    :root {
      --primary-mint: #A1E3DC;
      --bg-beige: #F6F0E8;
      --text-dark: #444;
      --white: #ffffff;
      --shadow: 0 4px 6px rgba(0,0,0,0.05);
      --border-radius: 12px;
      --accent: #222;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--bg-beige);
      color: var(--text-dark);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .navbar {
      background-color: var(--primary-mint);
      padding: 1rem 2rem;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 100;
      min-height: 70px;
    }

    .nav-logo {
      font-size: 1.5rem;
      font-weight: bold;
      color: white;
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .back-arrow {
      cursor: pointer;
      font-size: 1.8rem;
      transition: transform 0.2s;
    }

    .back-arrow:hover {
      transform: scale(1.1);
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 2.5rem 1.5rem 5rem;
      width: 100%;
      flex: 1;
    }

    h1 {
      margin-bottom: 1rem;
    }

    .seg-block {
      background: var(--white);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      padding: 1.5rem 1.75rem;
      margin-bottom: 1.5rem;
    }

    .seg-block h3 {
      margin-bottom: 0.75rem;
    }

    .seg-block p {
      margin-bottom: 0.5rem;
      line-height: 1.4;
    }

    .seg-refresh-btn {
      margin-top: 0.75rem;
      border: none;
      border-radius: 999px;
      padding: 0.5rem 1rem;
      cursor: pointer;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      background: var(--accent);
      color: #fff;
    }

    .seg-refresh-btn:disabled {
      opacity: 0.7;
      cursor: default;
    }

    .seg-status-text {
      margin-top: 0.5rem;
      font-size: 0.9rem;
      color: #666;
    }

    .seg-status-text.checking {
      font-style: italic;
    }

    /* Toggle style tipo tarjetas */
    .seg-toggle-group {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-top: 0.75rem;
    }

    .seg-toggle-option {
      flex: 1 1 220px;
      background: #f3f3f3;
      border-radius: 12px;
      padding: 0.9rem 1rem;
      display: flex;
      align-items: flex-start;
      gap: 0.5rem;
      cursor: pointer;
      border: 1px solid transparent;
      transition: 0.2s;
    }

    .seg-toggle-option input[type="radio"] {
      margin-top: 0.3rem;
    }

    .seg-toggle-option.active {
      border-color: var(--accent);
      background: #e9e9e9;
    }

    .seg-toggle-label {
      font-size: 0.9rem;
    }

    .seg-toggle-label strong {
      display: block;
      margin-bottom: 0.15rem;
    }

    .seg-history-list {
      list-style: none;
      margin-left: 0;
    }

    .seg-history-list li {
      margin-bottom: 0.35rem;
      font-size: 0.9rem;
    }

    /* ===== Personalizaci√≥n de alertas ===== */
    .alerts-contacts {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
      gap: 0.5rem 1rem;
      margin-top: 0.5rem;
      margin-bottom: 0.75rem;
    }

    .alerts-contact-item {
      display: flex;
      align-items: center;
      gap: 0.35rem;
      font-size: 0.9rem;
    }

    .alerts-contact-item input[type="checkbox"] {
      transform: scale(1.1);
    }

    .alerts-add-wrapper {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      margin-top: 0.3rem;
      font-size: 0.9rem;
    }

    .alerts-add-input {
      flex: 1;
      padding: 0.35rem 0.5rem;
      border-radius: 8px;
      border: 1px solid #ddd;
      font-size: 0.9rem;
    }

    .alerts-message {
      width: 100%;
      min-height: 70px;
      resize: vertical;
      padding: 0.5rem 0.6rem;
      border-radius: 8px;
      border: 1px solid #ddd;
      font-family: inherit;
      font-size: 0.95rem;
    }

    .alerts-row {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-top: 0.75rem;
    }

    .alerts-row > div {
      flex: 1 1 200px;
    }

    .alerts-save-btn {
      margin-top: 0.9rem;
      border: none;
      border-radius: 999px;
      padding: 0.45rem 1rem;
      cursor: pointer;
      font-weight: 500;
      background: var(--accent);
      color: #fff;
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
    }

    .alerts-save-btn.small {
      padding: 0.3rem 0.7rem;
      font-size: 0.8rem;
    }

    @media (max-width: 768px) {
      .container {
        padding: 2rem 1rem 4rem;
      }
    }
  </style>
</head>
<body>

  <nav class="navbar">
    <div class="nav-logo">
      <span class="back-arrow" onclick="history.back()">&#8592;</span>
      Seguridad
    </div>
  </nav>

  <main class="container">
    <h1>Seguridad</h1>

    <!-- Bloque: Personalizaci√≥n de alertas de emergencia -->
    <section class="seg-block">
      <h3>Personalizaci√≥n de alertas de emergencia</h3>
      <p>
        Personaliza el contenido y los destinatarios de tus alertas de emergencia
        para asegurarte de que la informaci√≥n enviada sea √∫til cuando uses el bot√≥n de p√°nico
        (simulado).
      </p>

      <!-- Contactos preferidos -->
      <div>
        <strong>Selecci√≥n de contactos preferidos</strong>
        <p style="margin-top: 0.2rem; font-size: 0.9rem;">
          Elige a qui√©nes se enviar√≠a la notificaci√≥n por defecto:
        </p>
        <div class="alerts-contacts" id="alertsContactsContainer">
          <label class="alerts-contact-item">
            <input type="checkbox" class="alert-contact" value="Mar√≠a" checked>
            <span>Mar√≠a</span>
          </label>
          <label class="alerts-contact-item">
            <input type="checkbox" class="alert-contact" value="Luis" checked>
            <span>Luis</span>
          </label>
          <label class="alerts-contact-item">
            <input type="checkbox" class="alert-contact" value="Juan" checked>
            <span>Juan</span>
          </label>
          <label class="alerts-contact-item">
            <input type="checkbox" class="alert-contact" value="Pedro">
            <span>Pedro</span>
          </label>
          <label class="alerts-contact-item">
            <input type="checkbox" class="alert-contact" value="Manolito">
            <span>Manolito</span>
          </label>
          <label class="alerts-contact-item">
            <input type="checkbox" class="alert-contact" value="Pepe Mec√°nico">
            <span>Pepe Mec√°nico</span>
          </label>
        </div>

        <!-- Agregar nuevo contacto (al lado de la lista, en la misma zona) -->
        <div class="alerts-add-wrapper">
          <input
            type="text"
            id="newAlertContactName"
            class="alerts-add-input"
            placeholder="Agregar nuevo contacto"
          >
          <button type="button" id="addAlertContactBtn" class="alerts-save-btn small">
            + Agregar
          </button>
        </div>
      </div>

      <!-- Mensaje personalizado -->
      <div style="margin-top: 0.75rem;">
        <strong>Mensaje personalizado</strong>
        <p style="margin-top: 0.2rem; font-size: 0.9rem;">
          Este mensaje se enviar√≠a cada vez que presiones el bot√≥n de p√°nico (simulado).
        </p>
        <textarea id="alertMessage" class="alerts-message">es una emergencia mi vida peligra</textarea>
      </div>

      <!-- Idioma + tipo de alerta -->
      <div class="alerts-row">
        <div>
          <strong>Configuraci√≥n de idioma</strong>
          <p style="margin-top: 0.2rem; font-size: 0.9rem;">
            Elige en qu√© idioma se enviar√≠a la notificaci√≥n:
          </p>
          <label class="alerts-contact-item">
            <input type="radio" name="alertLang" id="langEs" checked>
            <span>Espa√±ol</span>
          </label>
          <label class="alerts-contact-item">
            <input type="radio" name="alertLang" id="langEn">
            <span>Ingl√©s</span>
          </label>
        </div>

        <div>
          <strong>Diferenciaci√≥n por tipo de alerta</strong>
          <p style="margin-top: 0.2rem; font-size: 0.9rem;">
            Tipo de incidente que se usar√≠a por defecto:
          </p>
          <select id="alertType" style="padding: 0.4rem 0.5rem; border-radius: 8px; border: 1px solid #ddd; width: 100%;">
            <option value="robo" selected>Robo</option>
            <option value="asalto">Asalto</option>
            <option value="agresi√≥n">Agresi√≥n</option>
            <option value="secuestro">Secuestro</option>
          </select>
        </div>
      </div>

      <button id="saveAlertConfig" type="button" class="alerts-save-btn">
        üíæ Guardar configuraci√≥n de alertas
      </button>

      <p id="alertConfigStatus" class="seg-status-text">
        Usa esta secci√≥n para configurar tus alertas de emergencia (simulado).
      </p>
    </section>

    <!-- Bloque: versi√≥n actual -->
    <section class="seg-block">
      <h3>Versi√≥n actual de la aplicaci√≥n</h3>
      <p>
        <strong>Versi√≥n:</strong>
        <span id="currentVersion">v1.4.3</span>
        &nbsp;¬∑&nbsp;
        <strong>Actualizada el:</strong>
        <span id="currentVersionDate">05/12/2025</span>
      </p>

      <button id="btnRefreshVersion" class="seg-refresh-btn" type="button">
        üîÑ Verificar nueva versi√≥n
      </button>

      <p id="versionStatus" class="seg-status-text">
        La aplicaci√≥n est√° actualizada.
      </p>
    </section>

    <!-- Bloque: modo de verificaci√≥n -->
    <section class="seg-block">
      <h3>Verificaci√≥n de actualizaciones</h3>
      <p>¬øC√≥mo quieres que se revisen las nuevas versiones de la aplicaci√≥n?</p>

      <div class="seg-toggle-group">
        <label class="seg-toggle-option active" id="optionAuto">
          <input type="radio" name="modoVerificacion" id="verifAuto" checked>
          <span class="seg-toggle-label">
            <strong>Verificaci√≥n autom√°tica</strong>
            La app revisa peri√≥dicamente si hay nuevas versiones.
          </span>
        </label>

        <label class="seg-toggle-option" id="optionManual">
          <input type="radio" name="modoVerificacion" id="verifManual">
          <span class="seg-toggle-label">
            <strong>Verificaci√≥n manual</strong>
            Solo se revisa cuando t√∫ lo pides.
          </span>
        </label>
      </div>

      <p id="verifModeText" class="seg-status-text">
        Modo actual: verificaci√≥n autom√°tica.
      </p>
    </section>

    <!-- Bloque: historial -->
    <section class="seg-block">
      <h3>Historial de actualizaciones</h3>
      <ul class="seg-history-list">
        <li><strong>v1.4.3</strong> ‚Äì 05/12/2025 ¬∑ Optimizaci√≥n de rendimiento en reportes.</li>
        <li><strong>v1.4.2</strong> ‚Äì 30/11/2025 ¬∑ Mejora de la pantalla de publicaciones y comentarios.</li>
        <li><strong>v1.4.1</strong> ‚Äì 27/11/2025 ¬∑ Ajustes visuales en el mapa de incidentes.</li>
        <li><strong>v1.3.9</strong> ‚Äì 23/11/2025 ¬∑ Correcci√≥n de errores menores en notificaciones.</li>
        <li><strong>v1.3.5</strong> ‚Äì 20/11/2025 ¬∑ Primera versi√≥n con configuraci√≥n avanzada.</li>
      </ul>
    </section>
  </main>

  <div class="bottom-bar">
    <a href="dashboard.html" class="btn">
      <img src="assets/images/home.png" class="icon">
    </a>

    <a href="comunidad.html" class="btn">
      <img src="assets/images/msg.png" class="icon">
    </a>

    <a href="panicSvadm.html" class="btn alerta-btn">
      <img src="assets/images/button.png" class="icon alerta">
    </a>

    <a href="map.html" class="btn">
      <img src="assets/images/map.png" class="icon">
    </a>

    <a href="config.html" class="btn">
      <img src="assets/images/config.png" class="icon">
    </a>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const btnRefresh = document.getElementById('btnRefreshVersion');
      const versionStatus = document.getElementById('versionStatus');

      const verifAuto = document.getElementById('verifAuto');
      const verifManual = document.getElementById('verifManual');
      const optionAuto = document.getElementById('optionAuto');
      const optionManual = document.getElementById('optionManual');
      const verifModeText = document.getElementById('verifModeText');

      // ====== L√ìGICA: Verificar versi√≥n (simulado) ======
      if (btnRefresh) {
        btnRefresh.addEventListener('click', () => {
          versionStatus.textContent = 'Buscando actualizaciones...';
          versionStatus.classList.add('checking');
          btnRefresh.disabled = true;

          // Simulaci√≥n: no cambia la versi√≥n, solo "verifica"
          setTimeout(() => {
            versionStatus.textContent = 'La aplicaci√≥n ya est√° en la √∫ltima versi√≥n disponible (v1.4.3).';
            versionStatus.classList.remove('checking');
            btnRefresh.disabled = false;
          }, 1500);
        });
      }

      // ====== L√ìGICA: Modo de verificaci√≥n ======
      function actualizarModo() {
        if (verifAuto && verifAuto.checked) {
          verifModeText.textContent = 'Modo actual: verificaci√≥n autom√°tica.';
          optionAuto.classList.add('active');
          optionManual.classList.remove('active');
        } else {
          verifModeText.textContent = 'Modo actual: verificaci√≥n manual.';
          optionManual.classList.add('active');
          optionAuto.classList.remove('active');
        }
      }

      if (verifAuto && verifManual) {
        verifAuto.addEventListener('change', actualizarModo);
        verifManual.addEventListener('change', actualizarModo);
        actualizarModo();
      }

      // ====== L√ìGICA: Personalizaci√≥n de alertas de emergencia (simulado) ======
      const contactsContainer  = document.getElementById('alertsContactsContainer');
      const newContactInput    = document.getElementById('newAlertContactName');
      const addContactBtn      = document.getElementById('addAlertContactBtn');

      const alertMessageInput  = document.getElementById('alertMessage');
      const langEsInput        = document.getElementById('langEs');
      const langEnInput        = document.getElementById('langEn');
      const alertTypeSelect    = document.getElementById('alertType');
      const saveAlertConfigBtn = document.getElementById('saveAlertConfig');
      const alertConfigStatus  = document.getElementById('alertConfigStatus');

      // Agregar nuevo contacto din√°micamente
      if (addContactBtn && newContactInput && contactsContainer) {
        addContactBtn.addEventListener('click', () => {
          const name = (newContactInput.value || '').trim();
          if (!name) {
            alert('Escribe un nombre para el contacto.');
            return;
          }

          // Crear nuevo item tipo los dem√°s
          const label = document.createElement('label');
          label.className = 'alerts-contact-item';

          const checkbox = document.createElement('input');
          checkbox.type = 'checkbox';
          checkbox.className = 'alert-contact';
          checkbox.value = name;
          checkbox.checked = true;

          const span = document.createElement('span');
          span.textContent = name;

          label.appendChild(checkbox);
          label.appendChild(span);
          contactsContainer.appendChild(label);

          newContactInput.value = '';
        });
      }

      // Guardar configuraci√≥n (simulado)
      if (saveAlertConfigBtn) {
        saveAlertConfigBtn.addEventListener('click', () => {
          const alertContacts = document.querySelectorAll('.alert-contact');

          const selectedNames = Array.from(alertContacts)
            .filter(c => c.checked)
            .map(c => c.value);

          const message = (alertMessageInput.value || '').trim() || 'es una emergencia mi vida peligra';
          const lang = (langEsInput && langEsInput.checked) ? 'Espa√±ol' : 'Ingl√©s';
          const type = alertTypeSelect ? alertTypeSelect.value : 'robo';

          const destinatarios = selectedNames.length
            ? 'Se avisar√≠a a: ' + selectedNames.join(', ') + '.'
            : 'No hay contactos seleccionados.';

          alertConfigStatus.textContent =
            `Configuraci√≥n de alertas guardada. ${destinatarios} ` +
            `Mensaje base: "${message}". Idioma: ${lang}. Tipo de alerta por defecto: ${type}.`;
        });
      }
    });
  </script>
</body>
</html>

